openapi: 3.0.3
info:
  x-logo:
    url: https://stoma1c.ru/local/templates/stoma1c_2025/images/logo.svg
  title: 1С:Медицина. Стоматологическая клиника, ред. 2.1
  version: 1.0.0
  description: Документация API для 1С:Медицина. Стоматологическая клиника, ред. 2.1
servers:
  - url: http://cloud.stoma1c.ru/api/
paths:
  /hs/api/v1/auth_types/{clinic_id}/:
    get:
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: array
                    description: Массив доступных вариантов авторизации
                    items:
                      type: object
                      properties:
                        type:
                          type: string
                          description: Тип авторизации
                          example: whats_app
                          enum:
                            - whats_app
                            - sms
                            - email
                        title:
                          type: string
                          description: Название варианта авторизации
                          example: WhatsApp
                      required:
                        - type
                        - title
                  Errors:
                    type: object
                    description: Информация об ошибке (при успехе code = 0)
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                        example: 0
                      message:
                        type: string
                        description: Описание ошибки или пустая строка при успехе
                        example: Описание ошибки
                    required:
                      - code
                      - message
                required:
                  - Parameters
                  - Errors
                example:
                  parameters:
                    - type: whats_app
                      title: WhatsApp
                  errors:
                    code: 0
                    message: Описание ошибки
      summary: Получить доступные варианты авторизации
      operationId: Получить доступные варианты авторизации
      description: "Метод возвращает массив доступных вариантов авторизации"
      tags:
        - Авторизация
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          example: 6d3f2e84-29a7-11ed-a261-0242ac120002
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
  /hs/api/v1/auth/{clinic_id}/:
    post:
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    properties:
                      Parameters:
                        type: object
                        properties:
                          sent_SMS:
                            type: boolean
                      Error:
                        type: number
                      ErrorMessage:
                        type: string
                  - type: object
                    properties:
                      Parameters:
                        type: object
                        properties:
                          UserToken:
                            type: string
                      Errors:
                        type: object
                        properties:
                          code:
                            type: number
                          message:
                            nullable: true
              examples:
                example1:
                  value:
                    Request_id: 580392e6-ba49-4280-ac67-fcd6f2180121
                    Parameters:
                      sent_SMS: true
                    Error: 0
                    ErrorMessage: ""
                example2:
                  value:
                    Parameters:
                      UserToken: 9323751AAB5A5925142F352BBA7913B3
                    Errors:
                      code: 0
                      message: null
      summary: Авторизоваться
      operationId: Авторизоваться
      description: |-
        Осуществляется авторизация клиента с помощью СМС-подтверждения или другого доступного типа авторизации(параметр - auth_type). При вызове метода без передачи кода подтверждения будет сформирован и отправлен по СМС новый код подтверждения. Если передать в метод верный код подтверждения, будет возвращён ключ клиента (UserToken).
      tags:
        - Авторизация
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
      requestBody:
        content:
          application/json:
            example:
              login: "77731315"
              confirmation_code: "9876"
              name: Иванов Иван
            schema:
              type: object
              required:
                - login
              properties:
                login:
                  type: string
                  description: >-
                    Номер телефона пациента. Номер телефона должен передаваться в
                    формате 79876543210
                confirmation_code:
                  type: string
                  description: Код подтверждения
                name:
                  type: string
                  description: Имя пациента
                last_name:
                  type: string
                  description: Фамилия пациента
                second_name:
                  type: string
                  description: Отчество пациента
                birthday:
                  type: string
                  description: 'Дата рождения в формате: "15.11.1995".'
                email:
                  type: string
                  description: Электронная почта пациента
                auth_type:
                  type: string
                  description: >-
                    Выбранный тип авторизации. По умолчанию тип авторизации -
                    sms
  /hs/api/v1/validity_usertoken/{clinic_id}/:
    post:
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  Result:
                    type: boolean
              examples:
                example1:
                  value:
                    Result: true
                example2:
                  value:
                    Result: false
      summary: Валидность ключа пользователя
      operationId: Валидность ключа пользователя
      description: "Осуществляется проверка валидности ключа пользователя (usertoken)."
      tags:
        - Авторизация
      parameters:
        - name: clinic_id
          in: path
          description: >-
            ID клиники. Можно передавать ID любой клиники. На авторизацию это не
            влияет
          required: true
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: e07e5bc4-2bf9-11ec-910f-2c4d546557dd
        - name: usertoken
          in: header
          description: Ключ клиента
          required: false
          schema:
            type: string
          example: 5dff0370-ffd9-453c-b116-f09f405f0603
  /hs/api/v1/private_auth/{clinic_id}/:
    post:
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: object
                    properties:
                      UserToken:
                        type: string
                        description: Ключ клиента
                  Errors:
                    type: object
                    description: Информация об ошибке (при успехе code = 0)
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                        example: 0
                      message:
                        type: string
                        description: Описание ошибки или пустая строка при успехе
                        example: Описание ошибки
                    required:
                      - code
                      - message
                required:
                  - Parameters
                  - Errors
              example:
                Parameters:
                  UserToken: 9323751AAB5A5925142F352BBA7913B3
                Errors:
                  code: 0
                  message: null
      summary: Авторизация с цифровой подписью
      operationId: Авторизация с цифровой подписью
      description: |-
        Метод возвращает UserToken клиента, необходимый для записи клиента. \

        Цифровая подпись `sign` представляет собой хеш, сформированный с использованием алгоритма SHA256.\
        Цифровая подпись формируется из переданных данных и имеет следующий формат:
        `birthday;31.12.1990;email;test@mail.ru;last_name;Иванов;name;Иван;phone;79876543210;second_name;Иванович;sex;1;key;2693828843`

        - `birthday` - дата рождения,
        - `email` - электронная почта,
        - `last_name` - фамилия,
        - `name` - имя,
        - `phone` - номер телефона,
        - `second_name` - отчество,
        - `sex` - пол клиента: <ul><li> 1 - мужской </li><li> 2 - женский </li></ul>
        - `key` - секретный ключ из настроек внешней системы

        В случае, если какое-либо из полей пустое, в строку для хеширования необходимо включать только ключ без значения, например:
        `birthday;;email;test@mail.ru;last_name;Иванов;name;Иван;phone;79876543210;second_name;;sex;;key;2693828843`

      tags:
        - Авторизация
      parameters:
        - name: clinic_id
          in: path
          description: >-
            ID клиники. Можно передавать ID любой клиники. На авторизацию это не
            влияет
          required: true
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: e07e5bc4-2bf9-11ec-910f-2c4d546557dd
      requestBody:
        content:
          application/json:
            example:
              name: Антон
              second_name: Андреевич
              phone: "077729462"
              sign: fa8ec54b5df3127309e391d65ad24115a3530771
            schema:
              type: object
              required:
                - sign
              properties:
                name:
                  type: string
                  description: Имя пациента
                second_name:
                  type: string
                  description: Отчество пациента
                last_name:
                  type: string
                  description: Фамилия пациента
                phone:
                  type: string
                  description: Телефон пациента
                email:
                  type: string
                  description: Email пациента
                sex:
                  type: string
                  description: Пол пациента
                birthday:
                  type: string
                  description: Дата рождения в формате "31.12.1990"
                sign:
                  type: string
                  description: Цифровая подпись
  /hs/api/v1/book_services/{clinic_id}/:
    get:
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: array
                    items:
                      type: object
                      description: Массив доступных услуг
                      properties:
                        id:
                          type: string
                          description: Идентификатор услуги
                          format: uuid
                        title:
                          type: string
                          description: Название услуги
                        category:
                          type: object
                          description: Категория услуги
                          properties:
                            id:
                              type: string
                              format: uuid
                              description: ID категории
                            title:
                              type: string
                              description: Название категории
                          required:
                            - id
                            - title
                        price_min:
                          type: number
                          format: float
                          description: Минимальная цена услуги
                        price_max:
                          type: number
                          format: float
                          description: Максимальная цена услуги
                        comment:
                          type: string
                          description: Комментарий к услуге (может быть пустым)
                        active:
                          type: boolean
                          description: Признак активности услуги (доступна ли для записи)
                        length:
                          type: integer
                          description: Продолжительность услуги в минутах
                        ServicesAtSameTime:
                          type: array
                          description: Массив ID услуг, которые можно оказывать параллельно с данной
                          items:
                            type: string
                            format: uuid
                        sort_index:
                          type: integer
                          description: Индекс сортировки (для порядка отображения)
              example:
                Parameters:
                  - id: 140df5b4-5a58-11e7-82e7-0050568b5c8d
                    title: Мезотерапия
                    category:
                      id: 6ceedce5-666a-11e9-899f-2c4d546557dd
                      title: Косметология
                    price_min: 1100.5
                    price_max: 1100.5
                    comment: ""
                    active: true
                    length: 60
                    ServicesAtSameTime:
                      - e21cf6d4-5a57-11e7-82e7-0050568b5c8d
                      - d8329477-5a5a-11e7-82e7-0050568b5c8d
                      - 0c599e34-5b0d-11e7-82e7-0050568b5c8d
                      - 7a4b2cdc-5b0d-11e7-82e7-0050568b5c8d
                      - af41caf5-5b0d-11e7-82e7-0050568b5c8d
                      - bd9d179c-5b0d-11e7-82e7-0050568b5c8d
                    sort_index: 0
      summary: Получить список доступных для записи услуг
      operationId: Получить список доступных для записи услуг
      description: |-
        Возвращается массив доступных для записи услуг.

        Для получения списка услуг, доступных для записи определённым сотрудником и/или в определённое время, необходимо использовать отборы по врачу и/или времени:

        - staff_id: ID сотрудника. Будут выведены только услуги, которые может оказать указанный сотрудник.
        - datetime: дата (в формате iso8601). Будут выведены только услуги, которые могут быть оказаны в установленное время.

        Если параметры отбора не указаны, то будут выведены все услуги, которые может оказать любой сотрудник за всё время своей работы, начиная с текущей даты сеанса.

      tags:
        - Запись на прием
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          schema:
            type: string
        - name: staff_id
          in: query
          description: ID врача
          schema:
            type: string
        - name: datetime
          in: query
          description: Дата (в формате iso8601)
          example: 20170820T0000
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
  /hs/api/v1/book_staff/{clinic_id}/:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: array
                    description: Массив сотрудников
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                          description: ID сотрудника
                        name:
                          type: string
                          description: ФИО сотрудника
                        specialization:
                          type: object
                          properties:
                            id:
                              type: string
                              format: uuid
                              description: ID специализации
                            title:
                              type: string
                              description: Название специализации
                          required:
                            - id
                            - title
                        weight:
                          type: integer
                          description: Вес для сортировки (чем меньше — тем выше в списке)
                        information:
                          type: string
                          description: Дополнительная информация о сотруднике
                        avatar:
                          type: string
                          format: uri
                          description: URL аватара сотрудника (может быть пустым)
                        upcoming_dates:
                          type: array
                          description: Ближайшие даты, когда сотрудник работает (ISO 8601)
                          items:
                            type: string
                            format: date-time
                        ratings:
                          type: array
                          description: Рейтинги по разным параметрам
                          items:
                            type: object
                            properties:
                              rating_parameter:
                                type: object
                                properties:
                                  id:
                                    type: string
                                    format: uuid
                                  title:
                                    type: string
                                    description: Наименование оценки
                                required:
                                  - id
                                  - title
                              rating:
                                type: number
                                format: float
                                description: Средний рейтинг (от 0 до 5)
                              votes_count:
                                type: integer
                                description: Количество голосов
                            required:
                              - rating_parameter
                              - rating
                              - votes_count
                        comments_count:
                          type: integer
                          description: Общее количество отзывов на сотрудника
                      required:
                        - id
                        - name
                        - specialization
                  Errors:
                    type: object
                    description: Информация об ошибке
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                      message:
                        type: string
                        nullable: true
                        description: Сообщение об ошибке или null при успехе
                    required:
                      - code
                      - message
                required:
                  - Parameters
                  - Errors
              example:
                Parameters:
                  - id: 24ed443d-9a02-11e7-8931-2c4d546557dd
                    name: Новикова Анна
                    specialization:
                      id: 98340848-0658-11e7-a757-001d7d5c01d0
                      title: Косметолог
                    weight: 0
                    information: ""
                    avatar: http://localhost/Spa3/hs/api/files/123456/24ed443d-9a02-11e7-8931-2c4d546557dd-94953.jpg
                    upcoming_dates:
                      - 2025-12-29T00:00:00
                      - 2025-12-30T00:00:00
                      - 2025-12-31T00:00:00
                    ratings:
                      - rating_parameter:
                          id: 50a4f2a5-cdc4-11e7-893b-2c4d546557dd
                          title: Оценка
                        rating: 4.75
                        votes_count: 3
                      - rating_parameter:
                          id: b1f48dc2-cdc4-11e7-893b-2c4d546557dd
                          title: Скорость
                        rating: 4.5
                        votes_count: 2
                    comments_count: 3
                  - id: 8b3c2d1e-4f5a-11ec-9876-0242ac130003
                    name: Петров Иван Сергеевич
                    specialization:
                      id: 12345678-abcd-efgh-ijkl-123456789012
                      title: Терапевт
                    weight: 1
                    information: Врач высшей категории
                    avatar: ""
                    upcoming_dates:
                      - 2025-12-26T00:00:00
                      - 2025-12-27T00:00:00
                    ratings: []
                    comments_count: 5
                Errors:
                  code: 0
                  message: null
      summary: Получить список доступных для записи сотрудников
      operationId: Получить список доступных для записи сотрудников
      description: |-
        Возвращается массив доступных для записи врача.

        Для получения списка врачей, доступных для записи определённой услуги и/или в определённое время, необходимо использовать отборы по сотруднику и/или времени:

        - service_id: ID услуги. Будут выведены только сотрудники, которые могут оказать выбранную услугу.
        - datetime: дата (в формате iso8601). Будут выведены сотрудники, у которых есть свободные сеансы в указанное время.

        Если параметры отбора не указаны, то будут выведены все сотрудники, которые могут оказать хотя бы одну услугу за всё время своей работы, начиная с текущей даты сеанса.

      tags:
        - Запись на прием
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          schema:
            type: string
        - name: service_id
          in: query
          description: ID услуги
          schema:
            type: string
        - name: service_ids
          in: query
          description: >
            Строка Json с массивом идентификаторов услуг, которые сотрудник
            должен оказать последовательно

            Пример такой строки:

            {"services_array":["140df5b4-5a58-11e7-82e7-0050568b5c8d","d8329477-5a5a-11e7-82e7-0050568b5c8d"]}

            Если по этому массиву не найдено сотрудников, то будет возвращена
            ошибка с кодом 1080
          schema:
            type: string
        - name: datetime
          in: query
          description: Дата в формате iso8601
          example: 20170820T0000
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
  /hs/api/v1/book_dates/{clinic_id}/:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: array
                    description: Массив доступных дат в формате ISO 8601 (с временем 00:00:00)
                    items:
                      type: string
                      format: date-time
                      example: "2025-12-25T00:00:00"
                  Errors:
                    type: object
                    description: Информация об ошибке
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                      message:
                        type: string
                        nullable: true
                        description: Сообщение об ошибке или null при успехе
                    required:
                      - code
                      - message
                required:
                  - Parameters
                  - Errors
              example:
                Parameters:
                  - "2025-12-25T00:00:00"
                  - "2025-12-26T00:00:00"
                  - "2025-12-27T00:00:00"
                  - "2025-12-29T00:00:00"
                  - "2025-12-30T00:00:00"
                  - "2025-12-31T00:00:00"
                Errors:
                  code: 0
                  message: null
      summary: Получить список доступных для записи дат
      operationId: Получить список доступных для записи дат
      description: |-
        Возвращается массив доступных для записи дат за указанный период, содержащий даты в формате iso8601.

        Для получения списка дат, в которые определённый сотрудник может оказывать определённую услугу, необходимо использовать отборы по сотруднику и/или услуге:

        - service_id: ID услуги. Будут выведены даты, в которые можно записаться на выбранную услугу.
        - staff_id: ID сотрудника. Будут выведены даты, в которые можно записаться на выбранного сотрудника.
      tags:
        - Запись на прием
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          schema:
            type: string
        - name: start_date
          in: query
          description: >-
            Дата в формате iso8601. Начало периода. Автоматически берется начало
            дня
          required: true
          example: 20170820T0000
          schema:
            type: string
        - name: end_date
          in: query
          description: >-
            Дата в формате iso8601. Конец периода. Автоматически берется конец
            дня
          required: true
          example: 20170831T0000
          schema:
            type: string
        - name: service_id
          in: query
          description: ID услуги
          schema:
            type: string
        - name: staff_id
          in: query
          description: ID сотрудника
          schema:
            type: string
        - name: length
          in: query
          description: >-
            Требуемая длительность свободного окна сотрудника. Если передан этот
            параметр, то ID услуги учитываться не будет
          schema:
            type: number
        - name: service_ids
          in: query
          description: >
            Строка Json с массивом идентификаторов услуг, которые нужно оказать
            одновременно

            Пример такой строки:

            {"services_array":["140df5b4-5a58-11e7-82e7-0050568b5c8d","d8329477-5a5a-11e7-82e7-0050568b5c8d"]}
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
  /hs/api/v1/book_times/{clinic_id}/:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: array
                    description: Массив доступных временных слотов
                    items:
                      type: object
                      properties:
                        time:
                          type: string
                          description: Время начала слота в формате HH:MM
                          example: "09:00"
                        seance_length:
                          type: integer
                          description: Длительность доступного окна в минутах
                          example: 30
                        datetime:
                          type: string
                          format: date-time
                          description: Полная дата и время начала слота в формате ISO 8601
                          example: "2025-12-25T09:00:00"
                      required:
                        - time
                        - seance_length
                        - datetime
                  Errors:
                    type: object
                    description: Информация об ошибке
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                      message:
                        type: string
                        nullable: true
                        description: Сообщение об ошибке или null при успехе
                    required:
                      - code
                      - message
                required:
                  - Parameters
                  - Errors
              example:
                Parameters:
                  - time: "09:00"
                    seance_length: 60
                    datetime: "2025-12-25T09:00:00"
                  - time: "10:00"
                    seance_length: 60
                    datetime: "2025-12-25T10:00:00"
                  - time: "11:00"
                    seance_length: 30
                    datetime: "2025-12-25T11:00:00"
                  - time: "14:00"
                    seance_length: 90
                    datetime: "2025-12-25T14:00:00"
                  - time: "15:30"
                    seance_length: 30
                    datetime: "2025-12-25T15:30:00"
                  - time: "17:00"
                    seance_length: 60
                    datetime: "2025-12-25T17:00:00"
                Errors:
                  code: 0
                  message: null
      summary: Получить список слотов доступных для записи
      operationId: Получить список слотов доступных для записи
      description: |-
        Возвращается массив доступных для записи слотов с указанного времени до конца дня.

        Для получения списка слотов, в которые определённый сотрудник может оказывать определённую услугу, необходимо использовать отборы по сотруднику и/или услуге:

        - service_id: ID услуги. Будут выведены слоты, в которые можно записаться на выбранную услугу.
        - staff_id: ID сотрудника. Будут выведены даты, в которые можно записаться на выбранного сотрудника.
        - datetime: дата (в формате iso8601). Будут выведены слоты для записи в указанный день после установленного времени.

        Если параметры отбора не указаны, то будут выведены все свободные слоты по всем сотрудникам с текущей даты сеанса и до конца дня.
        Настройка длительности слотов производится в Настройках учета 1С:Медицина. Стоматологическая клиника в настройке Интервал онлайн-записи

      tags:
        - Запись на прием
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          schema:
            type: string
        - name: service_id
          in: query
          description: ID услуги
          schema:
            type: string
        - name: staff_id
          in: query
          description: ID сотрудника
          schema:
            type: string
        - name: datetime
          in: query
          description: >-
            Дата в формате iso8601. Если параметр не заполнен, используется
            текущая дата сеанса
          example: 20170824T0900
          schema:
            type: string
        - name: length
          in: query
          description: >-
            Требуемая длительность свободного окна сотрудника. Если передан этот
            параметр, то ID услуги учитываться не будет
          schema:
            type: number
        - name: service_ids
          in: query
          description: >
            Строка Json с массивом идентификаторов услуг, которые нужно оказать
            одновременно

            Пример такой строки:

            {"services_array":["140df5b4-5a58-11e7-82e7-0050568b5c8d","d8329477-5a5a-11e7-82e7-0050568b5c8d"]}
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
  /hs/api/v1/record_marks/{clinic_id}:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: array
                    description: Массив доступных меток записи
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                          description: Уникальный идентификатор метки
                        title:
                          type: string
                          description: Название метки (отображается пользователю)
                        color:
                          type: string
                          description: Цвет метки в HEX-формате (с #)
                          pattern: ^#[0-9A-Fa-f]{6}$
                          example: "#FF0000"
                      required:
                        - id
                        - title
                        - color
                  Errors:
                    type: object
                    description: Информация об ошибке
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                      message:
                        type: string
                        description: Сообщение об ошибке или пустая строка при успехе
                    required:
                      - code
                      - message
                required:
                  - Parameters
                  - Errors
              example:
                Parameters:
                  - id: 1561a273-bbc7-11e8-894d-4a2e5c85a0a3
                    title: Острая боль
                    color: "#FF0000"
                  - id: 1561a274-bbc7-11e8-894d-4a2e5c85a0a3
                    title: Первичный прием
                    color: "#FFD700"
                  - id: 1561a275-bbc7-11e8-894d-4a2e5c85a0a3
                    title: Повторный прием
                    color: "#FFC0CB"
                  - id: a1b2c3d4-e5f6-7890-g1h2-i3j4k5l6m7n8
                    title: Профилактический осмотр
                    color: "#90EE90"
                Errors:
                  code: 0
                  message: ""
      summary: Метки предварительной записи
      operationId: Метки предварительной записи
      description: ""
      tags:
        - Запись на прием
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 85fb1d22-ecd3-4cd1-8d30-007050821060
  /hs/api/v1/recording_dates/{clinic_id}/:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: array
                    description: Массив сотрудников с их доступными временными слотами
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                          description: ID сотрудника
                        date:
                          type: array
                          description: Массив доступных временных слотов в формате "DD.MM.YYYY HH:MM:SS"
                          items:
                            type: string
                            example: "25.12.2025 11:00:00"
                            pattern: '^\d{2}\.\d{2}\.\d{4} \d{2}:\d{2}:\d{2}$'
                      required:
                        - id
                        - date
                  Errors:
                    type: object
                    description: Информация об ошибке
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                      message:
                        type: string
                        description: Сообщение об ошибке или пустая строка при успехе
                    required:
                      - code
                      - message
                required:
                  - Parameters
                  - Errors
              example:
                Parameters:
                  - id: ef0fd170-3c83-465d-836b-51d72d208831
                    date:
                      - "25.12.2025 11:00:00"
                      - "25.12.2025 11:30:00"
                      - "25.12.2025 12:00:00"
                      - "25.12.2025 12:30:00"
                      - "25.12.2025 13:00:00"
                  - id: d39e5d29-740d-44a1-8c0d-9c873a43805c
                    date:
                      - "25.12.2025 14:00:00"
                      - "25.12.2025 14:30:00"
                      - "25.12.2025 15:00:00"
                      - "25.12.2025 15:30:00"
                      - "25.12.2025 16:00:00"
                  - id: a1b2c3d4-e5f6-7890-1234-567890abcdef
                    date:
                      - "26.12.2025 09:00:00"
                      - "26.12.2025 09:30:00"
                      - "26.12.2025 10:00:00"
                Errors:
                  code: 0
                  message: ""
      summary: Даты записи
      operationId: Даты записи
      description: |-
        Метод возвращает массив дат записей по сотрудникам за указанный период. \
        При передаче только даты начала и даты окончания будут отображены интервалы по всем сотрудникам, доступным для записи.

      tags:
        - Запись на прием
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          example: 0d190fc8-1c01-11ef-b1bf-f02f7488d897
          schema:
            type: string
        - name: start_date
          in: query
          description: Время начала отбора
          required: true
          example: 20240805T0000
          schema:
            type: string
        - name: end_date
          in: query
          description: Время окончания отбора
          required: true
          example: 20240905T0000
          schema:
            type: string
        - name: service_id
          in: query
          description: ID услуги для отбора
          example: 3c0fd170-3c83-465d-836b-51d72d208831
          schema:
            type: string
        - name: staff_id
          in: query
          description: ID сотрудника для отбора
          example: ef0fd170-3c83-465d-836b-51d72d208831
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: ec02e377-fb52-4807-a625-39627d38f51b
  /hs/api/v1/record_cost/{clinic_id}/:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: object
                    description: Результаты расчёта стоимости
                    properties:
                      cart:
                        type: array
                        description: Корзина услуг с детальным расчётом
                        items:
                          type: object
                          properties:
                            purchase:
                              type: object
                              properties:
                                id:
                                  type: string
                                  format: uuid
                                  description: ID услуги
                                title:
                                  type: string
                                  description: Название услуги
                                type:
                                  type: string
                                  description: Тип номенклатуры (обычно "service")
                                  example: service
                                description:
                                  type: string
                                  description: Описание услуги
                              required:
                                - id
                                - title
                                - type
                            count:
                              type: number
                              description: Количество (обычно 1 для услуг)
                            balance:
                              type: number
                              description: Остаток на складе/баланс (для товаров)
                            balance_warning:
                              type: string
                              description: Предупреждение о недостаточном остатке
                            price_type:
                              type: object
                              properties:
                                id:
                                  type: string
                                  format: uuid
                                title:
                                  type: string
                                  description: Название типа цены (например, "Розничная цена")
                              required:
                                - id
                                - title
                            price:
                              type: number
                              format: float
                              description: Базовая цена без скидки
                            nds:
                              type: number
                              description: Ставка НДС (коэффициент, например 1.0 или 1.2)
                            nds_sum:
                              type: number
                              format: float
                              description: Сумма НДС
                            price_with_discount:
                              type: number
                              format: float
                              description: Цена с учётом скидки
                            discount_sum:
                              type: number
                              format: float
                              description: Сумма скидки
                            payment_amount:
                              type: number
                              format: float
                              description: Итоговая сумма к оплате по позиции
                          required:
                            - purchase
                            - count
                            - price_type
                            - price
                            - payment_amount
                      total_amount:
                        type: number
                        format: float
                        description: Общая сумма к оплате (с учётом всех скидок)
                      total_discount:
                        type: number
                        format: float
                        description: Общая сумма скидок
                      may_be_payment:
                        type: array
                        description: Возможные способы оплаты (депозиты, бонусы и т.д.)
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              format: uuid
                            title:
                              type: string
                            type:
                              type: string
                              example: deposit
                            payment_amount:
                              type: number
                              format: float
                              description: Доступная сумма для оплаты этим способом
                          required:
                            - id
                            - title
                            - type
                            - payment_amount
                      promotions:
                        type: array
                        description: Применённые акции и скидки
                        items:
                          type: object
                          properties:
                            type:
                              type: string
                              description: Тип акции (например, "discount")
                            title:
                              type: string
                              description: Название акции
                            amount:
                              type: number
                              format: float
                              description: Сумма скидки по акции
                          required:
                            - type
                            - title
                            - amount
                    required:
                      - cart
                      - total_amount
                      - total_discount
                      - may_be_payment
                      - promotions
                  Errors:
                    type: object
                    description: Информация об ошибке
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                      message:
                        type: string
                        description: Сообщение об ошибке или пустая строка при успехе
                    required:
                      - code
                      - message
                required:
                  - Parameters
                  - Errors
              example:
                Parameters:
                  cart:
                    - purchase:
                        id: 9ca0fa6c-48ee-11ea-96bc-38d547b31ac0
                        title: Услуга 90 мин
                        type: service
                        description: Описание услуги
                      count: 1
                      balance: 0
                      balance_warning: ""
                      price_type:
                        id: bb266307-3e83-11ea-96b8-38d547b31ac0
                        title: Розничная цена
                      price: 100
                      nds: 1
                      nds_sum: 0
                      price_with_discount: 50
                      discount_sum: 50
                      payment_amount: 50
                    - purchase:
                        id: a1b2c3d4-5678-90ef-1234-567890abcdef
                        title: Консультация специалиста
                        type: service
                        description: Первичная консультация
                      count: 1
                      balance: 0
                      balance_warning: ""
                      price_type:
                        id: bb266307-3e83-11ea-96b8-38d547b31ac0
                        title: Розничная цена
                      price: 1500
                      nds: 1.2
                      nds_sum: 250
                      price_with_discount: 1500
                      discount_sum: 0
                      payment_amount: 1500
                  total_amount: 1550
                  total_discount: 50
                  may_be_payment:
                    - id: b9c4c5de-6691-11ef-b1c6-001a7dda7115
                      title: Основной депозит
                      type: deposit
                      payment_amount: 2000
                    - id: c2d3e4f5-6789-90ab-cdef-123456789012
                      title: Бонусный счёт
                      type: bonus
                      payment_amount: 300
                  promotions:
                    - type: discount
                      title: 50% по промокоду Test
                      amount: 50
                    - type: gift
                      title: Подарок при записи на две услуги
                      amount: 0
                Errors:
                  code: 0
                  message: ""
      summary: Расчет стоимости записи
      operationId: Расчет стоимости записи
      description: |-
        Метод выполняет расчет стоимости приема с учетом предоставленных услуг записи и действующих маркетинговых акций, настроенных в системе. \
        Для корректного применения скидок требуется передача заголовка запроса usertoken.Если `usertoken` не передан — расчёт производится по общим (розничным) ценам без персональных предложений.
      tags:
        - Запись на прием
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          example: b9c4c5de-6691-11ef-b1c6-001a7dda7115
          schema:
            type: string
        - name: record_array
          in: query
          description: >-
            Строка Json с массивом структур, содержащих параметры:


            <ul>
                <li> "datetime" - время записи: "20240831T1500"</li>
                <li> "service_id" - ID номенклатуры</li>
                <li> "staff_id" - ID сотрудника</li>
            </ul>


            <br>Пример такой строки:

            [{"datetime": "20240831T1500","service_id":
            "9ca0fa6c-48ee-11ea-96bc-38d547b31ac0","staff_id":
            "663290db-105c-41cc-97d4-ed5151065813"}]
          required: true
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 0d44270f-e77f-4e45-a9ad-b4612412a48d
        - name: usertoken
          in: header
          description: Ключ клиента
          required: false
          schema:
            type: string
          example: 256D323401901DB2BD42405FA54509B0
  /hs/api/v1/book_record/{clinic_id}/:
    post:
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: object
                    properties:
                      Result:
                        type: boolean
                  Errors:
                    nullable: true
              example:
                Parameters:
                  Result: true
                  record_id: d4608b12-5a07-11e9-899e-2c4d546557dd
                  status: TemporarilyReservedNeedPayment
                  sum: 2300
                  may_be_payment:
                    - id: 83b95983-4813-11ea-89af-2c4d546557dd
                      title: Основной лицевой счет
                      type: deposit
                      payment_amount: 1300
                  marks:
                    - d6fcccbc-6f89-4aa7-bf3a-6abded5dad28
                    - d9de866e-785c-11e8-b6dc-4a2e5c85a0a3
                Errors:
                  code: 0
                  message: ""
      summary: Запись на прием
      operationId: book_record
      description: |-
        Осуществляет запись на услугу пациента на указанное время к выбранному сотруднику.

        Пациент определяется по ключу клиента (UserToken), получаемому при авторизации и  передаваемому в заголовке запроса.Если передано несколько услуг, время оказания которых пересекается, то считается, что это параллельные услуги. Если эти услуги нельзя оказывать одновременно, то будет возвращена ошибка.
      tags:
        - Запись на прием
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
        - name: usertoken
          in: header
          description: Ключ клиента
          required: false
          schema:
            type: string
          example: 256D323401901DB2BD42405FA54509B0
      requestBody:
        content:
          application/json:
            example:
              record_array:
                - datetime: "20230412T1115"
                  service_id: "aca979fc-3e92-11ea-96b8-38d547b31ac0"
                  staff_id: "933a9758-ed6f-4cb3-bffa-e7edcaa13e58"
              fullname: "Иванов Иван"
              birthday: "15.11.1995"
              email: "test@mail.ru"
              comment: "Комментарий к записи"
              commercial: "stoma1c.ru"
              marks:
                - "933a9758-ed6f-4cb3-bffa-e7edcaa13e58"
            schema:
              type: object
              properties:
                record_array:
                  $ref: "#/components/schemas/Record"
                  description: >-
                    Массив записей. Является обязательным, если не передан
                    ID приема
                fullname:
                  type: string
                  description: >-
                    Фамилия, имя, отчество пациента, разделенные пробелами. Если
                    передан данный параметр, то игнорируются параметры name,
                    last_name и second_name
                name:
                  type: string
                  description: Имя пациента
                last_name:
                  type: string
                  description: Фамилия пациента
                second_name:
                  type: string
                  description: Отчество пациента
                birthday:
                  type: string
                  description: 'Дата рождения в формате: "15.11.1995".'
                email:
                  type: string
                  description: Адрес электронной почты пациента
                notify_by_sms:
                  type: number
                  description: Время до напоминания о записи в часах
                comment:
                  type: string
                  description: Комментарий к приему
                commercial:
                  type: string
                  description: Рекламный источник
                record_id:
                  type: string
                  description: >-
                    ID приема. Если передан, то остальные параметры
                    передавать не нужно
                marks:
                  type: string
                  description: Массив с идентификаторами меток
                promocode:
                  type: string
                  description: Промокод
  /hs/api/v1/change_record/{clinic_id}/:
    put:
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: object
                    properties:
                      Result:
                        type: boolean
                  Errors:
                    nullable: true
              example:
                Parameters:
                  Result: true
                Errors: null
      summary: Перенести прием
      operationId: change_record
      description: |-
        Проверяет возможность переноса записи и изменяет время, если это возможно. \
        При успешном изменении времени будет возвращен параметр "Result": true.
      tags:
        - Запись на прием
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          schema:
            type: string
        - name: datetime
          in: query
          description: Дата в формате iso8601. Новая дата и время записи
          required: true
          example: 20170820T1030
          schema:
            type: string
        - name: record_id
          in: query
          description: ID записи
          required: true
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
        - name: usertoken
          in: header
          description: Ключ клиента
          required: false
          schema:
            type: string
          example: 256D323401901DB2BD42405FA54509B0
  /hs/api/v1/cancel_record/{clinic_id}/:
    delete:
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: object
                    properties:
                      Result:
                        type: boolean
                  Errors:
                    type: object
                    properties:
                      code:
                        type: number
                      message:
                        nullable: true
              example:
                Parameters:
                  Result: true
                Errors:
                  code: 0
                  message: null
      summary: Отмена записи на прием
      operationId: cancel_record
      description: "Осуществляет отмену записи клиента"
      tags:
        - Запись на прием
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          schema:
            type: string
        - name: record_id
          in: query
          description: ID записи пациента
          required: true
          example: ef0fd170-3c83-465d-836b-51d72d208831
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
        - name: usertoken
          in: header
          description: Ключ клиента
          required: false
          schema:
            type: string
          example: 256D323401901DB2BD42405FA54509B0
  /hs/api/v1/client/{clinic_id}/:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: object
                    description: Информация о пациенте
                    properties:
                      full_name:
                        type: string
                        description: Полное ФИО пациента
                      name:
                        type: string
                        description: Имя
                      second_name:
                        type: string
                        description: Отчество
                      last_name:
                        type: string
                        description: Фамилия
                      birthday:
                        type: string
                        description: Дата рождения в формате DD.MM.YYYY
                      sex:
                        type: string
                        nullable: true
                        description: Пол (может быть null)
                        enum:
                          - Мужской
                          - Женский
                      email:
                        type: array
                        description: Массив email-адресов пациента
                        items:
                          type: string
                          format: email
                    required:
                      - full_name
                      - name
                      - second_name
                      - last_name
                      - birthday
                  Errors:
                    type: object
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                      message:
                        type: string
                        nullable: true
                        description: Сообщение об ошибке или null при успехе
                    required:
                      - code
                      - message
                required:
                  - Parameters
                  - Errors
              example:
                Parameters:
                  full_name: Коренина Анна
                  name: Анна
                  second_name: ""
                  last_name: Коренина
                  birthday: 15.11.1995
                  sex: null
                  email:
                    - Anna172@mail.ru
                    - AnnaKorenina@mail.ru
                Errors:
                  code: 0
                  message: null
      summary: Получить информацию о пациенте
      operationId: Получить информацию о пациенте
      description: Возвращает информацию о клиенте, пациенте определяется по ключу пациента (UserToken), получаемому при авторизации и передаваемому в заголовке запроса.
      tags:
        - Пациенты
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
        - name: usertoken
          in: header
          description: Ключ клиента
          required: false
          schema:
            type: string
          example: 256D323401901DB2BD42405FA54509B0
    post:
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: object
                    properties:
                      id:
                        type: string
                        description: ID созданного пациента
                      clinic_id:
                        type: string
                        format: uuid
                        description: Идентификатор клиники
                      name:
                        type: string
                        description: Имя
                      surname:
                        type: string
                        description: Фамилия
                      patronymic:
                        type: string
                        description: Отчество
                      birth_date:
                        type: string
                        nullable: true
                        description: Дата рождения в формате DD.MM.YYYY
                      phone:
                        type: string
                        description: Телефон
                      email:
                        type: string
                        nullable: true
                      sold_amount:
                        type: number
                        description: Сумма продаж по пациенту
                      visits_count:
                        type: number
                        description: Количество посещений
                      sex:
                        type: string
                        description: Представление пола клиента
                      sex_id:
                        type: number
                        description: Идентификатор пола (0 - не указан, 1- мужской, 2 - женский)
                        enum:
                          - 0
                          - 1
                          - 2
                      status:
                        type: string
                        description: Представление статуса клиента
                        enum:
                          - Потенциальный
                          - Новый
                          - Невернувшийся
                          - Постоянный
                          - Отказ
                      status_id:
                        type: number
                        description: Идентификатор статуса
                    required:
                      - id
                      - clinic_id
                      - phone
                  Errors:
                    type: object
                    properties:
                      code:
                        type: integer
                      message:
                        type: string
                    required:
                      - code
                      - message
                required:
                  - Parameters
                  - Errors
              example:
                Parameters:
                  id: 47efc7f111104513a25b302e6712df59
                  clinic_id: 0d190fc8-1c01-11ef-b1bf-f02f7488d897
                  name: Иван
                  surname: Петров
                  patronymic: Васильевич
                  birth_date: 07.10.1987
                  phone: "77777777777"
                  email: client21321@mail.ru
                  sold_amount: 0
                  visits_count: 5
                  sex: Мужской
                  sex_id: 1
                  status: Потенциальный
                  status_id: 0
                Errors:
                  code: 0
                  message: ""
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
              example:
                code: 1001
                message: Неверный формат данных или отсутствует apikey
      summary: Создание пациента
      operationId: Создание пациента
      description: ""
      tags:
        - Пациенты
      parameters:
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: Имя пациента
                surname:
                  type: string
                  description: Фамилия пациента
                patronymic:
                  type: string
                  description: Отчество пациента
                phone:
                  type: string
                  description: Номер телефона (только цифры, без +7 или 8)
                email:
                  type: string
                  nullable: true
                  description: Email пациента
                sex:
                  type: integer
                  description: Пол (0 — не указан, 1 — мужчина, 2 — женщина)
                  enum: [0, 1, 2]
                birth_date:
                  type: string
                  nullable: true
                  description: Дата рождения в формате YYYY-MM-DD или YYYY
                clinic_id:
                  type: string
                  description: ID клиники (дублирует путь, можно оставить пустым)
              required:
                - phone
              example:
                name: Василий
                surname: Соновен
                patronymic: Васильевич
                phone: "79211234567"
                email: 123456789@gmail.com
                sex: 1
                birth_date: "1985-05-15"
    put:
      responses:
        "200":
          description: ок
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: object
                    properties:
                      id:
                        type: string
                      clinic_id:
                        type: string
                      name:
                        type: string
                      surname:
                        type: string
                      patronymic:
                        type: string
                      birth_date:
                        type: string
                        nullable: true
                      phone:
                        type: string
                      email:
                        type: string
                        nullable: true
                      sold_amount:
                        type: number
                      visits_count:
                        type: number
                      sex:
                        type: string
                        description: Представление пола клиента
                      sex_id:
                        type: number
                        description: Идентификатор пола (0 - не указан, 1- мужской, 2 - женский)
                        enum:
                          - 0
                          - 1
                          - 2
                      status:
                        type: string
                        description: Представление статуса клиента
                        enum:
                          - Потенциальный
                          - Новый
                          - Невернувшийся
                          - Постоянный
                          - Отказ
                      status_id:
                        type: number
                        description: Идентификатор статуса
                  Errors:
                    type: object
                    properties:
                      code:
                        type: number
                      message:
                        type: string
                required:
                  - Parameters
                  - Errors
              example:
                Parameters:
                  id: 47efc7f111104513a25b302e6712df59
                  clinic_id: 0d190fc81c0111efb1bff02f7488d897'
                  name: Иван
                  surname: Петров
                  patronymic: Васильевич
                  birth_date: 07.10.1987
                  phone: "77777777777"
                  email: client21321@mail.ru
                  sold_amount: 0
                  visits_count: 5
                  sex: Мужской
                  sex_id: 1
                  status: Потенциальный
                  status_id: 0
                Errors:
                  code: 0
                  message: Описание ошибки
        "400":
          description: Bad Request
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                    description: Пример кода ошибки при неверных данных или заголовках
                  message:
                    type: string
              example:
                code: 1001
                message: Неверный формат данных или отсутствует apikey
      summary: Изменение пациента
      operationId: Изменение пациента
      description: "Метод создаёт нового клиента на основе переданных данных. Номер телефона передавать в методе PUT не обязательно."
      tags:
        - Пациенты
      parameters:
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                  description: ID пациента (обязателен для обновления)
                name:
                  type: string
                surname:
                  type: string
                patronymic:
                  type: string
                phone:
                  type: string
                email:
                  type: string
                sex:
                  type: integer
                  enum: [0, 1, 2]
                birth_date:
                  type: string
                clinic_id:
                  type: string
              required:
                - id
              example:
                id: 47efc7f111104513a25b302e6712df59
                name: Василий
                surname: Соновен
                patronymic: Васильевич
                phone: "79211234567"
                email: newemail@gmail.com
                sex: 1
                birth_date: "1985-05-15"
  /hs/api/v1/clients/{clinic_id}/:
    post:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: array
                    description: Массив пациентов
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          description: ID пациента
                        clinic_id:
                          type: string
                          format: uuid
                          description: ID клиники
                        name:
                          type: string
                          description: Имя
                        surname:
                          type: string
                          description: Фамилия
                        patronymic:
                          type: string
                          description: Отчество
                        birth_date:
                          type: string
                          description: Дата рождения в формате DD.MM.YYYY
                        phone:
                          type: string
                          description: Номер телефона
                        email:
                          type: string
                          nullable: true
                          description: Email пациента
                        sold_amount:
                          type: number
                          description: Сумма продаж по пациенту
                        visits_count:
                          type: number
                          description: Количество посещений
                        sex:
                          type: string
                          description: Пол текстом (Мужской / Женский)
                        sex_id:
                          type: integer
                          description: Пол кодом (1 — мужчина, 2 — женщина)
                          enum: [1, 2]
                        status:
                          type: string
                          description: Статус пациента текстом (например, Потенциальный, Постоянный)
                        status_id:
                          type: integer
                          description: Код статуса пациента
                      required:
                        - id
                        - clinic_id
                        - phone
                  Errors:
                    type: object
                    description: Информация об ошибке
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                      message:
                        type: string
                        description: Сообщение об ошибке или пустая строка при успехе
                    required:
                      - code
                      - message
                  Meta:
                    type: object
                    description: Метаданные пагинации и общего количества
                    properties:
                      items_count:
                        type: integer
                        description: Общее количество найденных записей
                      pages_count:
                        type: integer
                        description: Общее количество страниц при текущем page_size
                      page_current:
                        type: integer
                        description: Текущая страница
                      page_size:
                        type: integer
                        description: Размер страницы (количество записей на странице)
                    required:
                      - items_count
                      - pages_count
                      - page_current
                      - page_size
                required:
                  - Parameters
                  - Errors
                  - Meta
        "400":
          description: Bad Request
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                    description: Пример кода ошибки при неверных данных или заголовках
                  message:
                    type: string
              example:
                code: 1001
                message: Неверный формат данных или отсутствует apikey
      summary: Информация о пациентах
      operationId: Информация о пациентах
      description: ""
      tags:
        - Пациенты
      parameters:
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: YOUR_API_KEY
        - name: usertoken
          in: header
          description: Ключ клиента (либо secret key из внешней системы)
          required: false
          schema:
            type: string
          example: YOUR_USER_TOKEN
      requestBody:
        content:
          application/json:
            example:
              clinic_id: ""
              page: 1
              count: 30
              order_by: name
              order_by_direction: DESC
              fields:
                - id
                - clinic_id
                - name
                - surname
                - patronymic
                - birth_date
                - phone
                - email
                - sold_amount
                - visits_count
              filters:
                - type: id
                  value:
                    - "['47efc7f111104513a25b302e6712df59'"
                    - "'04d419c74d6d11efb1c4f02f7488d897']"
            schema:
              type: object
              properties:
                clinic_id:
                  type: string
                  description: ID клиники
                page:
                  type: number
                  description: "Номер страницы (по умолчанию: 1)"
                count:
                  type: number
                  description: "Количество записей на странице (по умолчанию: 20)"
                order_by:
                  type: string
                  description: "Поле для сортировки (например: `name`, 'surname')"
                order_by_direction:
                  type: string
                  enum:
                    - DESC
                  description: "Направление сортировки: `ASC` или `DESC`"
                fields:
                  type: array
                  description: Список возвращаемых полей пациента
                  items: {}
                filters:
                  type: array
                  description: Массив фильтров по различным типам данных пациента
                  items: {}
              required:
                - clinic_id
  /hs/api/v1/clinics/{clinic_id}/:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: array
                    description: Массив доступных клиник
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                          description: Уникальный идентификатор клиники
                        title:
                          type: string
                          description: Название клиники
                        work_time:
                          type: array
                          description: Расписание работы по дням недели (массив из 7 элементов, начиная с понедельника)
                          items:
                            type: object
                            properties:
                              active:
                                type: boolean
                                description: Работает ли клиника в этот день
                              day:
                                type: integer
                                description: Номер дня недели (1 — понедельник, 7 — воскресенье)
                                minimum: 1
                                maximum: 7
                              start:
                                type: string
                                description: Время открытия в формате HH:MM
                                pattern: "^([0-1][0-9]|2[0-3]):[0-5][0-9]$"
                              end:
                                type: string
                                description: Время закрытия в формате HH:MM
                                pattern: "^([0-1][0-9]|2[0-3]):[0-5][0-9]$"
                            required:
                              - active
                              - day
                              - start
                              - end
                        contact_information:
                          type: object
                          description: Контактная информация клиники
                          properties:
                            phone:
                              type: string
                              description: Телефон клиники
                            email:
                              type: string
                              format: email
                              description: Email клиники
                            address:
                              type: string
                              description: Адрес клиники
                            website:
                              type: string
                              format: uri
                              description: Сайт клиники (может быть пустым)
                          required:
                            - phone
                            - address
                      required:
                        - id
                        - title
                  Errors:
                    type: object
                    description: Информация об ошибке
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                      message:
                        type: string
                        description: Сообщение об ошибке или пустая строка при успехе
                    required:
                      - code
                      - message
                required:
                  - Parameters
                  - Errors
              example:
                Parameters:
                  - id: 0d190fc8
                    title: OOO "Стоматология"
                    work_time:
                      - active: true
                        day: 1
                        start: "07:00"
                        end: "22:00"
                    contact_information:
                      phone: "78945612233"
                      email: test_clinic@mail.ru
                      address: г.Москва
                      website: www.website.ru
                Errors:
                  code: 0
                  message: Описание ошибки
      summary: Получить список клиник
      operationId: Получить список клиник
      description: "Метод возвращает список доступных клиник с расписанием работы и контактной информацией."
      tags:
        - Клиники
      parameters:
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
  /hs/api/v1/records/{clinic_id}/:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: array
                    description: Массив записей на приём
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          description: ID записи
                        clinic_id:
                          type: string
                          format: uuid
                          description: ID клиники
                        start_date:
                          type: string
                          description: Дата и время начала записи в формате YYYY-MM-DD HH:MM:SS или YYYY
                        end_date:
                          type: string
                          description: Дата и время окончания записи
                        create_date:
                          type: string
                          description: Дата создания записи
                        client:
                          type: object
                          description: Информация о пациенте
                          properties:
                            id:
                              type: string
                              format: uuid
                            name:
                              type: string
                            surname:
                              type: string
                            patronymic:
                              type: string
                            display_name:
                              type: string
                              description: Полное отображаемое ФИО
                            phone:
                              type: string
                            email:
                              type: string
                              nullable: true
                          required:
                            - id
                            - display_name
                            - phone
                        staff:
                          type: object
                          description: Информация о сотруднике (враче)
                          properties:
                            id:
                              type: string
                              format: uuid
                            name:
                              type: string
                              description: ФИО сотрудника
                            specialization:
                              type: object
                              properties:
                                id:
                                  type: string
                                  format: uuid
                                title:
                                  type: string
                              required:
                                - id
                                - title
                            weight:
                              type: integer
                              description: Вес для сортировки
                            information:
                              type: string
                              description: Дополнительная информация (может содержать HTML)
                            avatar:
                              type: string
                              nullable: true
                              description: URL аватара или null
                          required:
                            - id
                            - name
                        services:
                          type: array
                          description: Массив оказываемых услуг в рамках записи
                          items:
                            type: object
                            properties:
                              id:
                                type: string
                                format: uuid
                              title:
                                type: string
                              cost:
                                type: number
                                format: float
                                description: Итоговая стоимость
                              amount:
                                type: number
                                description: Количество
                              cost_per_unit:
                                type: number
                                format: float
                                description: Цена за единицу
                              first_cost:
                                type: number
                                format: float
                                description: Первоначальная цена (до скидки)
                              discount:
                                type: number
                                format: float
                                description: Сумма скидки
                            required:
                              - id
                              - title
                              - cost
                        comment:
                          type: string
                          description: Комментарий к записи
                        created_user:
                          type: object
                          description: Пользователь, создавший запись
                          properties:
                            id:
                              type: string
                            title:
                              type: string
                          required:
                            - id
                            - title
                        status:
                          type: string
                          description: Статус записи (например, confirmed, cancelled, completed)
                          example: confirmed
                      required:
                        - id
                        - clinic_id
                        - start_date
                        - client
                        - staff
                        - services
                  Errors:
                    type: object
                    description: Информация об ошибке
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                      message:
                        type: string
                        description: Сообщение об ошибке или пустая строка при успехе
                    required:
                      - code
                      - message
                  Meta:
                    type: object
                    description: Метаданные пагинации
                    properties:
                      items_count:
                        type: integer
                        description: Общее количество найденных записей
                      pages_count:
                        type: integer
                        description: Общее количество страниц
                      page_current:
                        type: integer
                        description: Текущая страница
                      page_size:
                        type: integer
                        description: Размер страницы
                    required:
                      - items_count
                      - pages_count
                      - page_current
                      - page_size
                required:
                  - Parameters
                  - Errors
                  - Meta
              example:
                Parameters:
                  - id: 7c802c46
                    clinic_id: 0d190fc8
                    start_date: "2025"
                    end_date: "2025"
                    create_date: "2025"
                    client:
                      id: 401b3cea
                      name: Савелий
                      surname: Соновен
                      patronymic: Васильевич
                      display_name: Соновен Савелий Васильевич
                      phone: "79211234567"
                      email: 123456789@gmail.com
                    staff:
                      id: d39e5d29
                      name: Врач
                      specialization:
                        id: a19ee94d
                        title: Врач стоматолог
                      weight: 0
                      information: <img...>
                      avatar: "null"
                    services:
                      - id: 6ad4c14f
                        title: Услуга 2
                        cost: 500
                        amount: 1
                        cost_per_unit: 500
                        first_cost: 500
                        discount: 0
                    comment: Комментарий
                    created_user:
                      id: 0d191059
                      title: Администратор
                    status: confirmed
                Errors:
                  code: 0
                  message: Описание ошибки
                Meta:
                  items_count: 10
                  pages_count: 2
                  page_current: 1
                  page_size: 5
      summary: Получить список записей
      operationId: Получить список записей
      description: "Метод возвращает информацию о записях клиентов из базы данных согласно переданным параметрам. Поддерживает фильтрацию, выбор полей, сортировку и пагинацию."
      tags:
        - Записи
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          schema:
            type: string
        - name: page
          in: query
          description: Номер страницы
          example: "1"
          schema:
            type: number
        - name: count
          in: query
          description: Количество записей на странице
          example: "20"
          schema:
            type: number
        - name: id
          in: query
          description: ID записи
          schema:
            type: string
        - name: client_id
          in: query
          description: ID пациента
          schema:
            type: string
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
        - name: usertoken
          in: header
          description: Ключ клиента (либо secret key из внешней системы)
          required: false
          schema:
            type: string
          example: YOUR_USER_TOKEN
    put:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: array
                    description: Массив записей на приём
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          description: ID записи
                        clinic_id:
                          type: string
                          format: uuid
                          description: ID клиники
                        start_date:
                          type: string
                          description: Дата и время начала записи в формате YYYY-MM-DD HH:MM:SS или YYYY
                        end_date:
                          type: string
                          description: Дата и время окончания записи
                        create_date:
                          type: string
                          description: Дата создания записи
                        client:
                          type: object
                          description: Информация о пациенте
                          properties:
                            id:
                              type: string
                              format: uuid
                            name:
                              type: string
                            surname:
                              type: string
                            patronymic:
                              type: string
                            display_name:
                              type: string
                              description: Полное отображаемое ФИО
                            phone:
                              type: string
                            email:
                              type: string
                              nullable: true
                          required:
                            - id
                            - display_name
                            - phone
                        staff:
                          type: object
                          description: Информация о сотруднике (враче)
                          properties:
                            id:
                              type: string
                              format: uuid
                            name:
                              type: string
                              description: ФИО сотрудника
                            specialization:
                              type: object
                              properties:
                                id:
                                  type: string
                                  format: uuid
                                title:
                                  type: string
                              required:
                                - id
                                - title
                            weight:
                              type: integer
                              description: Вес для сортировки
                            information:
                              type: string
                              description: Дополнительная информация (может содержать HTML)
                            avatar:
                              type: string
                              nullable: true
                              description: URL аватара или null
                          required:
                            - id
                            - name
                        services:
                          type: array
                          description: Массив оказываемых услуг в рамках записи
                          items:
                            type: object
                            properties:
                              id:
                                type: string
                                format: uuid
                              title:
                                type: string
                              cost:
                                type: number
                                format: float
                                description: Итоговая стоимость
                              amount:
                                type: number
                                description: Количество
                              cost_per_unit:
                                type: number
                                format: float
                                description: Цена за единицу
                              first_cost:
                                type: number
                                format: float
                                description: Первоначальная цена (до скидки)
                              discount:
                                type: number
                                format: float
                                description: Сумма скидки
                            required:
                              - id
                              - title
                              - cost
                        comment:
                          type: string
                          description: Комментарий к записи
                        created_user:
                          type: object
                          description: Пользователь, создавший запись
                          properties:
                            id:
                              type: string
                            title:
                              type: string
                          required:
                            - id
                            - title
                        status:
                          type: string
                          description: Статус записи (например, confirmed, cancelled, completed)
                          example: confirmed
                      required:
                        - id
                        - clinic_id
                        - start_date
                        - client
                        - staff
                        - services
                  Errors:
                    type: object
                    description: Информация об ошибке
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                      message:
                        type: string
                        description: Сообщение об ошибке или пустая строка при успехе
                    required:
                      - code
                      - message
                required:
                  - Parameters
                  - Errors
              example:
                Parameters:
                  - id: 7c802c46
                    clinic_id: 0d190fc8
                    start_date: "2025"
                    end_date: "2025"
                    create_date: "2025"
                    client:
                      id: 401b3cea
                      name: Савелий
                      surname: Соновен
                      patronymic: Васильевич
                      display_name: Соновен Савелий Васильевич
                      phone: "79211234567"
                      email: 123456789@gmail.com
                    staff:
                      id: d39e5d29
                      name: Врач
                      specialization:
                        id: a19ee94d
                        title: Врач стоматолог
                      weight: 0
                      information: <img...>
                      avatar: "null"
                    services:
                      - id: 6ad4c14f
                        title: Услуга 2
                        cost: 500
                        amount: 1
                        cost_per_unit: 500
                        first_cost: 500
                        discount: 0
                    comment: Комментарий
                    created_user:
                      id: 0d191059
                      title: Администратор
                    status: confirmed
                Errors:
                  code: 0
                  message: Описание ошибки
      summary: Изменить запись
      operationId: Изменить запись
      description: ""
      tags:
        - Записи
      parameters:
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: 409265d1-a0af-4ce8-88ec-7e3435024111
        - name: usertoken
          in: header
          description: Ключ клиента (либо secret key из внешней системы)
          required: false
          schema:
            type: string
          example: YOUR_USER_TOKEN
      requestBody:
        content:
          application/json:
            example:
              clinic_id: 0d190fc8-1c01-11ef-b1bf-f02f7488d897
              id: 0d190fc8-1c01-11ef-b1bf-f02f7488d897
              staff_id: 0d190fc8-1c01-11ef-b1bf-f02f7488d897
              duration: 15
            schema:
              type: object
              properties:
                clinic_id:
                  type: string
                  description: ID клиники
                id:
                  type: string
                  description: ID пациента
                datetime:
                  type: string
                  description: Новое время записи
                staff_id:
                  type: string
                  description: ID врача
                comment:
                  type: string
                  description: Комментарий записи
                status:
                  type: string
                  description: >-
                    Статус записи: "not_confirmed" - Прием не подтвержден,
                    "waiting" - Пациент ожидает, "confirmed" - Прием
                    подтвержден, "started" - Прием начат, "not_happen" - Прием
                    не состоялся, "ended" - Прием окончен ,"canceled" - Прием
                    отменен
                duration:
                  type: number
                  description: Новая длительность
              required:
                - clinic_id
                - id
  /hs/api/v1/services/{clinic_id}/:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Parameters:
                    type: array
                    description: Массив услуг
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                          description: ID услуги
                        title:
                          type: string
                          description: Название услуги
                        price_min:
                          type: number
                          format: float
                          description: Минимальная цена услуги
                        price_max:
                          type: number
                          format: float
                          description: Максимальная цена услуги
                        weight:
                          type: integer
                          description: Вес для сортировки (чем меньше — тем выше в списке)
                        category_id:
                          type: object
                          description: Категория услуги
                          properties:
                            id:
                              type: string
                              format: uuid
                            title:
                              type: string
                          required:
                            - id
                            - title
                        comment:
                          type: string
                          description: Комментарий к услуге (может быть пустым)
                        seance_length:
                          type: integer
                          description: Стандартная продолжительность сеанса в минутах
                        active:
                          type: boolean
                          description: Доступна ли услуга для записи
                        staff:
                          type: array
                          description: Массив сотрудников, которые могут оказывать эту услугу (может быть пустым при общем списке)
                          items:
                            type: object
                            properties:
                              id:
                                type: string
                                format: uuid
                                description: ID сотрудника
                              seance_length:
                                type: integer
                                description: Продолжительность сеанса у этого сотрудника (может отличаться от общей)
                            required:
                              - id
                      required:
                        - id
                        - title
                        - price_min
                        - price_max
                        - active
                        - seance_length
                  Errors:
                    type: object
                    description: Информация об ошибке
                    properties:
                      code:
                        type: integer
                        description: Код ошибки (0 — успех)
                      message:
                        type: string
                        description: Сообщение об ошибке или пустая строка при успехе
                    required:
                      - code
                      - message
                  Meta:
                    type: object
                    description: Метаданные пагинации
                    properties:
                      items_count:
                        type: integer
                        description: Общее количество найденных услуг
                      pages_count:
                        type: integer
                        description: Общее количество страниц
                      page_current:
                        type: integer
                        description: Текущая страница
                      page_size:
                        type: integer
                        description: Размер страницы
                    required:
                      - items_count
                      - pages_count
                      - page_current
                      - page_size
                required:
                  - Parameters
                  - Errors
                  - Meta
              example:
                Parameters:
                  - id: 6ad4c14f-1c03-11ef-b1bf-f02f7488d897
                    title: Услуга 2
                    price_min: 500
                    price_max: 500
                    weight: 0
                    category_id:
                      id: a19ee948-1c00-11ef-b1bf-f02f7488d897
                      title: Хирургия
                    comment: ""
                    seance_length: 60
                    active: true
                    staff:
                      - id: ef0fd170-3c83-465d-836b-51d72d208831
                        seance_length: 60
                Errors:
                  code: 0
                  message: Описание ошибки
                Meta:
                  items_count: 10
                  pages_count: 2
                  page_current: 1
                  page_size: 5
      summary: Получить список услуг
      operationId: Получить список услуг
      description: ""
      tags:
        - Записи
      parameters:
        - name: clinic_id
          in: path
          description: ID клиники
          required: true
          example: 0d190fc8-1c01-11ef-b1bf-f02f7488d897
          schema:
            type: string
        - name: service_id
          in: query
          description: Фильтрация по ID услуги
          schema:
            type: string
        - name: staff_id
          in: query
          description: Фильтрация по ID врача
          schema:
            type: string
        - name: category_id
          in: query
          description: Фильтрация по ID категории
          schema:
            type: string
        - name: page
          in: query
          description: Номер страницы
          example: "1"
          schema:
            type: number
        - name: count
          in: query
          description: Количество элементов на странице
          example: "20"
          schema:
            type: number
        - name: apikey
          in: header
          description: Ключ приложения
          required: true
          schema:
            type: string
          example: ec02e377-fb52-4807-a625-39627d38f51b
        - name: usertoken
          in: header
          description: Ключ клиента или secret-key
          required: false
          schema:
            type: string
          example: C1DB8500345E8B9C25E98330D0B3266B
components:
  schemas:
    AuthType:
      type: object
      properties:
        type:
          type: string
          enum:
            - sms
            - whats_app
            - email
        title:
          type: string
          example: WhatsApp
          description: Название варианта авторизации
    cart:
      type: object
      required:
        - purchase_id
        - count
      properties:
        purchase_id:
          type: string
          description: ID номенклатуры
        count:
          type: number
          description: Количество номенклатуры
        staff_id:
          type: string
          description: ID сотрудника
    Payment:
      type: object
      required:
        - cash
        - card
        - deposit
      properties:
        cash:
          type: number
          description: Сумма оплаты наличными
        card:
          type: number
          description: Сумма оплаты картой
        deposit:
          type: number
          description: Сумма оплаты лицевым счетом
    PaymentList:
      type: object
      required:
        - type
        - amount
      properties:
        type:
          type: string
          description: >-
            Тип оплаты ("cash" - оплата наличными, "card" - оплата картой,
            "deposit" - оплата с лицевого счета, "bonus" - оплата с бонусного
            счета)
        amount:
          type: number
          description: Сумма оплаты
        id:
          type: string
          description: >-
            ID лицевого счета (необходимо передавать только при
            оплате с лицевого/бонусного счета)
    Record:
      type: object
      required:
        - datetime
        - service_id
      properties:
        datetime:
          type: string
          description: Дата в формате iso8601. Дата и время занятия
        service_id:
          type: string
          description: ID услуги
        staff_id:
          type: string
          description: >-
            ID сотрудника. Если не передан, то в прием подставится
            любой свободный сотрудник, способный оказать услугу
    Filter:
      type: object
      required:
        - type
        - value
      properties:
        type:
          type: string
          example: id
          description: >-
            Тип фильтра (`id`, `name`, `surname`, `patronymic`, `phone`, `email`)
        value:
          type: array
          items: {}
          description: >-
            Значение для фильтрации. Может быть как строкой, так и массивом
            строк
    Client:
      type: object
      properties:
        id:
          type: string
          example: 47efc7f111104513a25b302e6712df59
        clinic_id:
          type: string
          example: 0d190fc81c0111efb1bff02f7488d897'
        name:
          type: string
          example: Иван
        surname:
          type: string
          example: Петров
        patronymic:
          type: string
          example: Васильевич
        birth_date:
          type: string
          example: 07.10.1987
          nullable: true
        phone:
          type: string
          example: "77777777777"
        email:
          type: string
          example: client21321@mail.ru
          nullable: true
        sold_amount:
          type: number
        visits_count:
          type: number
          example: 5
    Error:
      type: object
      properties:
        code:
          type: number
        message:
          type: string
          example: Описание ошибки
    ErrorBadRequest:
      type: object
      properties:
        code:
          type: number
          example: 1001
          description: Пример кода ошибки при неверных данных или заголовках
        message:
          type: string
          example: Неверный формат данных или отсутствует apikey
    Meta:
      type: object
      properties:
        items_count:
          type: number
          example: 10
          description: Общее количество найденных записей
        pages_count:
          type: number
          example: 2
          description: Общее количество страниц
        page_current:
          type: number
          example: 1
          description: Текущая страница
        page_size:
          type: number
          example: 5
          description: Размер страницы
    ClientCreate:
      type: object
      required:
        - phone
      properties:
        name:
          type: string
          example: Василий
          description: Имя пациента
        surname:
          type: string
          example: Соновен
          description: Фамилия пациента
        patronymic:
          type: string
          example: Васильевич
          description: Отчество пациента
        phone:
          type: number
          example: 79211234567
          description: Номер телефона (только цифры)
        email:
          type: string
          example: 123456789@gmail.com
          description: Email пациента
        sex:
          type: number
          example: 1
          description: Пол (0 — не указан, 1 — мужчина, 2 — женщина)
        birth_date:
          type: string
          example: "2011"
          description: 01-01 (string, optional) - Дата рождения в формате `YYYY-MM-DD`
    Clinic:
      type: object
      required:
        - work_time
      properties:
        id:
          type: string
          example: 0d190fc8
          description: >-
            1c01-11ef-b1bf-f02f7488d897 (string) - ID клиники
        title:
          type: string
          example: OOO "Стоматология"
          description: Название клиники
        work_time:
          type: array
          items: {}
          description: Расписание работы по дням недели
        contact_information:
          $ref: "#/components/schemas/ContactInformation"
          description: Контактная информация клиники
    WorkTime:
      type: object
      properties:
        active:
          type: boolean
          example: true
          description: Признак активности дня
        day:
          type: number
          example: 1
          description: День недели (1 = понедельник, 7 = воскресенье)
        start:
          type: string
          example: "07:00"
          description: Время начала работы (формат `HH:mm`)
        end:
          type: string
          example: "22:00"
          description: Время окончания работы (формат `HH:mm`)
    ContactInformation:
      type: object
      properties:
        phone:
          type: string
          example: "78945612233"
          description: Телефон клиники
        email:
          type: string
          example: test_clinic@mail.ru
          description: Email клиники
        address:
          type: string
          example: г.Москва
          description: Адрес клиники
        website:
          type: string
          example: www.website.ru
          description: Сайт клиники
    Records:
      type: object
      required:
        - client
        - staff
        - services
        - created_user
      properties:
        id:
          type: string
          example: 7c802c46
          description: a899-4da1-b87c-eb2d68254f0f (string) - Уникальный ID записи
        clinic_id:
          type: string
          example: 0d190fc8
          description: 1c01-11ef-b1bf-f02f7488d897 (string) - ID клиники
        start_date:
          type: string
          example: "2025"
          description: 06-30T12:00:00 (string) - Дата и время начала приёма (ISO 8601)
        end_date:
          type: string
          example: "2025"
          description: 06-30T12:15:00 (string) - Дата и время окончания приёма (ISO 8601)
        create_date:
          type: string
          example: "2025"
          description: 06-30T09:49:06 (string) - Дата создания записи (ISO 8601)
        client:
          $ref: "#/components/schemas/ClientInfo"
          description: Данные пациента
        staff:
          $ref: "#/components/schemas/StaffInfo"
          description: Данные сотрудника (врача)
        services:
          type: array
          items: {}
          description: Услуги, оказанные в рамках приёма
        comment:
          type: string
          example: Комментарий
          description: Комментарий к записи
        created_user:
          $ref: "#/components/schemas/UserInfo"
          description: Пользователь, создавший запись
        status:
          type: string
          example: confirmed
          description: >-
            Статус записи (`confirmed`, `not_confirmed`, `waiting`, `started`,
            `not_happen`, `ended`, `canceled`)
    ClientInfo:
      type: object
      properties:
        id:
          type: string
          example: 401b3cea
          description: 4d34-4234-b1c0-f5f96551c984 (string)
        name:
          type: string
          example: Савелий
        surname:
          type: string
          example: Соновен
        patronymic:
          type: string
          example: Васильевич
        display_name:
          type: string
          example: Соновен Савелий Васильевич
        phone:
          type: string
          example: "79211234567"
        email:
          type: string
          example: 123456789@gmail.com
    StaffInfo:
      type: object
      properties:
        id:
          type: string
          example: d39e5d29
          description: 740d-44a1-8c0d-9c873a43805c (string)
        name:
          type: string
          example: Врач
        specialization:
          $ref: "#/components/schemas/Specialization"
        weight:
          type: number
        information:
          type: string
          example: <img...>
          description: HTML-строка с эмоджи/описанием
        avatar:
          type: string
          example: "null"
          description: Аватар врача
          nullable: true
    Specialization:
      type: object
      properties:
        id:
          type: string
          example: a19ee94d
          description: 1c00-11ef-b1bf-f02f7488d897 (string)
        title:
          type: string
          example: Врач стоматолог
    UserInfo:
      type: object
      properties:
        id:
          type: string
          example: 0d191059
          description: 1c01-11ef-b1bf-f02f7488d897 (string)
        title:
          type: string
          example: Администратор
    Service:
      type: object
      properties:
        id:
          type: string
          example: 6ad4c14f
          description: 1c03-11ef-b1bf-f02f7488d897 (string)
        title:
          type: string
          example: Услуга 2
        cost:
          type: number
          example: 500
          description: Общая стоимость услуги
        amount:
          type: number
          example: 1
          description: Количество оказанных единиц
        cost_per_unit:
          type: number
          example: 500
          description: Стоимость за единицу
        first_cost:
          type: number
          example: 500
          description: Начальная стоимость (до скидки)
        discount:
          type: number
          description: Скидка в процентах
    Services:
      type: object
      properties:
        id:
          type: string
          example: 6ad4c14f-1c03-11ef-b1bf-f02f7488d897
          description: ID услуги
        title:
          type: string
          example: Услуга 2
          description: Название услуги
        price_min:
          type: number
          example: 500
          description: Минимальная цена
        price_max:
          type: number
          example: 500
          description: Максимальная цена
        weight:
          type: number
          description: Вес/приоритет в сортировке
        category_id:
          oneOf:
            - $ref: "#/components/schemas/Category"
              description: Категория услуги
            - nullable: true
        comment:
          type: string
          description: Комментарий
        seance_length:
          type: number
          example: 60
          description: Продолжительность услуги в минутах
        active:
          type: boolean
          example: true
          description: Признак онлайн-записи услуги
        staff:
          type: array
          items:
            $ref: "#/components/schemas/ServiceStaff"
          description: Список врачей, выполняющих услугу
          nullable: true
    Category:
      type: object
      properties:
        id:
          type: string
          example: a19ee948-1c00-11ef-b1bf-f02f7488d897
        title:
          type: string
          example: Хирургия
    ServiceStaff:
      type: object
      properties:
        id:
          type: string
          example: ef0fd170-3c83-465d-836b-51d72d208831
          description: ID сотрудника
        seance_length:
          type: number
          example: 60
          description: Индивидуальная длительность приёма
tags:
  - name: Авторизация
  - name: Запись на прием
  - name: Пациенты
  - name: Клиники
  - name: Записи
  - name: Дополнительная информация
    description: |-
      ## Коды ошибок

      Могут возвращаться следующие коды ошибок:

      | Код   | Описание                                                                                   |
      | ----- | ------------------------------------------------------------------------------------------ |
      | 1000  | Ошибка работы с базой данных                                                               |
      | ....  |                                                                                            |
      | 1014  | Не указан эквайринговый терминал оплаты                                                    |
      | ....  |                                                                                            |
      | 1040  | Не найден метод                                                                            |
      | 1041  | Онлайн-запись недоступна                                                                   |
      | ....  |                                                                                            |
      | 1050  | Не найден сотрудник                                                                        |
      | 1051  | Не найдена услуга                                                                          |
      | 1052  | Не задан временной интервал                                                                |
      | 1053  | Для пациента установлен запрет онлайн-записи                                               |
      | 1054  | Неверный формат даты                                                                       |
      | 1055  | Не найдена клиника                                                                         |
      | 1056  | Не найдена предварительная запись                                                          |
      | 1057  | Не выбрана кассовая смена                                                                  |
      | 1058  | Не найдена кассовая смена                                                                  |
      | 1059  | Не задан номер чека                                                                        |
      | 1060  | Неверная структура массива оплат                                                           |
      | 1061  | Не указано время начала приема                                                             |
      | 1062  | Не указан ключ авторизации                                                                 |
      | 1063  | Неверный ключ авторизации                                                                  |
      | 1064  | Не указан логин                                                                            |
      | 1065  | Неверный код подтверждения                                                                 |
      | 1066  | Не указан ключ пациента                                                                    |
      | 1067  | Неверный ключ пациента                                                                     |
      | 1068  | Код подтверждения не действителен                                                          |
      | ....  |                                                                                            |
      | 1071  | Не задан массив записи                                                                     |
      | 1072  | Неверный параметр rating                                                                   |
      | ....  |                                                                                            |
      | 1080  | Не найдено сотрудников, способных оказать переданный массив услуг                          |
      | 1081  | Не указан ключ шифрования во внешней системе                                               |
      | 1082  | Неверная подпись                                                                           |
      | ....  |                                                                                            |
      | 1100  | Сотрудник не оказывает выбранную услугу                                                    |
      | 1101  | Сотрудник не может оказать услугу в выбранное время                                        |
      | 1102  | Сотрудник не работает в указанное время                                                    |
      | 1103  | Совпадает время услуг в переданном массиве                                                 |
      | ....  |                                                                                            |
      | 1106  | Нет сотрудников, способных оказать услугу                                                  |
      | ....  |                                                                                            |
      | 1110  | Не удалось отправить СМС-сообщение с кодом подтверждения                                   |
      | 1111  | Остатка на лицевом счете пациента недостаточно для оплаты                                  |
      | 1112  | Не удалось обновить информацию о пациенте                                                  |
      | 1113  | Запись недоступна для отмены                                                               |
      | 1114  | Массив переданных услуг нельзя оказывать одновременно                                      |
      | 1115  | Услуга недоступна для записи в выбранное время                                             |
      | 1116  | Параметр amount должен быть больше нуля                                                    |
      | 1117  | Не найдена группа онлайн-продажи                                                           |
      | 1118  | Строка поиска передана неверно                                                             |
      | 1119  | Строка поиска должна содержать хотя бы 3 символа                                           |
      | 1120  | Не удалось отправить сообщение в мессенджер с кодом подтверждения по причине: {причина}    |
